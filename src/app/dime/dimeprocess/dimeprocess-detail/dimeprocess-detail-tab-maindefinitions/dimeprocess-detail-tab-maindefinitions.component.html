<form (ngSubmit)="mainService.update()" #f="ngForm" class="form-horizontal">
	<div class="form-group">
		<label for="processName" class="col-xs-2 control-label">Name:</label>
		<div class="col-xs-10">
			<input type="text" class="form-control" id="processName" name="processName" [(ngModel)]="mainService.currentItem.name">
		</div>
	</div>
	<div class="form-group">
		<label for="processSource" class="col-xs-2 control-label">Source Environment:</label>
		<div class="col-xs-10">
			<select name="processSource" id="processSource" class="form-control" [(ngModel)]="mainService.currentItem.source">
				<option *ngFor="let srcEnvironment of environmentService.itemList" [value]="srcEnvironment.id"> {{ srcEnvironment.name }} </option>
			</select>
		</div>
	</div>
	<div class="form-group">
		<label for="processTarget" class="col-xs-2 control-label">Target Environment:</label>
		<div class="col-xs-10">
			<select name="processTarget" id="processTarget" class="form-control" [(ngModel)]="mainService.currentItem.target">
				<option *ngFor="let tarEnvironment of environmentService.itemList" [value]="tarEnvironment.id"> {{ tarEnvironment.name }} </option>
			</select>
		</div>
	</div>
	<div class="form-group">
		<label for="processTarget" class="col-xs-2 control-label">E-mail to Inform on Error:</label>
		<div class="col-xs-10">
			<input type="email" class="form-control" id="processerroremail" name="processerroremail" [(ngModel)]="mainService.currentItem.erroremail" />
		</div>
	</div>
	<div class="form-group">
		<label class="col-xs-2 control-label">Tags:</label>
		<div class="col-xs-10">
			<div class="col-xs-{{decideColWidth(tagService.groupList.length)}}" *ngFor="let tagGroup of tagService.groupList">
				{{tagGroup.name}}
				<hr />
				<ng-container *ngFor="let tagItem of tagService.itemList">
					<div class="checkbox" *ngIf="tagItem.taggroup == tagGroup.id">
						<label>
							<input type="checkbox" name="tagName{{tagItem.id}}" [(ngModel)]="mainService.currentItem?.tags[tagItem.id]"> {{tagItem.name}}
						</label>
					</div>
				</ng-container>
			</div>
		</div>
	</div>
	<div class="form-group">
		<div class="col-xs-10 col-xs-offset-2">
			<button class="btn btn-primary btn-xs" type="submit">
				<i class="fa fa-floppy-o fa-fw"></i> Save Changes</button>
		</div>
	</div>
	<div class="form-group">
		<div class="col-xs-10 col-xs-offset-2">
			<span class="help-block" *ngIf="mainService.currentItem.isPrepared === atReadyStatus.Ready">
				<div class="well well-success well-sm">
					This process definition is ready to run.
				</div>
			</span>
			<span class="help-block" *ngIf="mainService.currentItem.isPrepared === atReadyStatus.Checking">
				<div class="well well-warning well-sm">
					Please wait, system is checking if the process is ready...
				</div>
			</span>
			<span class="help-block" *ngIf="mainService.currentItem.isPrepared === atReadyStatus.NotReady">
				<div class="alert alert-danger" role="alert">
					This matrix definition is not ready for data entry.
					<br> Issue List:
					<ol>
						<li *ngFor="let issue of mainService.currentItem.issueList">{{issue}}</li>
					</ol>
				</div>
			</span>
		</div>
	</div>
</form>
<pre>{{ mainService.currentItem | json }}</pre>
